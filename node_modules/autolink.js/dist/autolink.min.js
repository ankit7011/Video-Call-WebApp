!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.autoLink=i()}(this,function(){"use strict";var t={http:/.*?:\/\//g,url:/(\s|^)((https?|ftp):\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\w-\/\?\=\#\.])*/gi,image:/\.(jpe?g|png|gif)$/,email:/(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/gi,cloudmusic:/http:\/\/music\.163\.com\/#\/song\?id=(\d+)/i,kickstarter:/(https?:\/\/www\.kickstarter\.com\/projects\/\d+\/[a-zA-Z0-9_-]+)(\?\w+\=\w+)?/i,youtube:/https?:\/\/www\.youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)(\?\w+\=\w+)?/i,vimeo:/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/[^\/]*\/videos\/|album\/\d+\/video\/|video\/|)(\d+)(?:$|\/|\?)/i,youku:/https?:\/\/v\.youku\.com\/v_show\/id_([a-zA-Z0-9_\=-]+).html(\?\w+\=\w+)?(\#\w+)?/i};function i(t,i){void 0===i&&(i={}),this.string=i.safe?t.replace(/[&<>]/g,a):t,this.options=i,this.attrs="",this.linkAttr="",this.imageAttr="",this.options.sharedAttr&&(this.attrs=r(this.options.sharedAttr)),this.options.linkAttr&&(this.linkAttr=r(this.options.linkAttr)),this.options.imageAttr&&(this.imageAttr=r(this.options.imageAttr))}function e(t){return void 0===t||t}function r(t){var i="";for(var e in t)e&&(i+=" "+e+'="'+t[e]+'"');return i}function o(t){return"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?"http://"+t:t}i.prototype={constructor:i,parse:function(){var i=e(this.options.image),r=e(this.options.email),o=e(this.options.br),s="";return s=i?this.string.replace(t.url,this.formatIMGMatch.bind(this)):this.string.replace(t.url,this.formatURLMatch.bind(this)),r&&(s=this.formatEmailMatch.call(this,s)),o&&(s=s.replace(/\r?\n/g,"<br />")),s},formatURLMatch:function(i,e){if(i=o(i.trim()),(this.options.cloudmusic||this.options.embed)&&i.indexOf("music.163.com/#/song?id=")>-1)return i.replace(t.cloudmusic,e+'<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="http://music.163.com/outchain/player?type=2&id=$1&auto=1&height=66"></iframe>');if((this.options.kickstarter||this.options.embed)&&t.kickstarter.test(i))return i.replace(t.kickstarter,e+'<iframe width="480" height="360" src="$1/widget/video.html" frameborder="0" scrolling="no"> </iframe>');if((this.options.vimeo||this.options.embed)&&t.vimeo.test(i))return i.replace(t.vimeo,e+'<iframe width="500" height="281" src="https://player.vimeo.com/video/$1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>');if((this.options.youtube||this.options.embed)&&t.youtube.test(i))return i.replace(t.youtube,e+'<iframe width="560" height="315" src="https://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>');if((this.options.youku||this.options.embed)&&t.youku.test(i))return i.replace(t.youku,e+'<iframe height=498 width=510 src="http://player.youku.com/embed/$1" frameborder=0 allowfullscreen></iframe>');var r=this.options.removeHTTP?i.replace(t.http,""):i;return e+'<a href="'+i+'"'+this.attrs+this.linkAttr+">"+r+"</a>"},formatIMGMatch:function(i,e){return i=i.trim(),t.image.test(i)?e+'<img src="'+o(i.trim())+'"'+this.attrs+this.imageAttr+"/>":this.formatURLMatch(i,e)},formatEmailMatch:function(i){return i.replace(t.email,'<a href="mailto:$&"'+this.attrs+this.linkAttr+">$&</a>")}};var s={"&":"&amp;","<":"&lt;",">":"&gt;"};function a(t){return s[t]||t}return function(t,e){return new i(t,e).parse()}});
//# sourceMappingURL=autolink.min.js.map
